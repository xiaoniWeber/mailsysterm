{"ast":null,"code":"import _slicedToArray from\"/Users/zhangyanjun/react-project/mail/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import dayjs from'dayjs';import'dayjs/locale/zh-cn';import dayLocaleData from'dayjs/plugin/localeData';import{Calendar,Col,Row,Select,theme}from'antd';import cls from'classnames';import styles from'./index.module.less';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";dayjs.extend(dayLocaleData);var CalendarPanel=function CalendarPanel(props){var onChangeTime=props.onChangeTime,busyValue=props.busyValue;var _theme$useToken=theme.useToken(),token=_theme$useToken.token;var _useState=useState(),_useState2=_slicedToArray(_useState,2),calenderValue=_useState2[0],setCalenderValue=_useState2[1];var onPanelChange=function onPanelChange(value,mode){console.log(value.format('YYYY-MM-DD'),mode);};var wrapperStyle={// width: \"100%\",\nborder:\"1px solid \".concat(token.colorBorderSecondary),borderRadius:token.borderRadiusLG};var handleSetToday=function handleSetToday(){//设置为当前的日期\nvar value=dayjs();onChangeTime(value.format('YYYY-MM-DD'));setCalenderValue(value);};var handleChange=function handleChange(day){onChangeTime(day.format('YYYY-MM-DD'));setCalenderValue(day);};var style={border:\"1px solid \".concat(token.colorPrimary),borderRadius:4,background:'#C5DEFC'};var getTime=function getTime(time){var year=time.get('year');var month=time.get('month')+1;var day=time.date();return\"\".concat(year,\"-\").concat(month,\"-\").concat(day);};var handleFullCell=React.useCallback(function(current,info){if(info.type!=='date'){return info.originNode;}if(typeof current==='number'){return/*#__PURE__*/_jsx(\"div\",{className:\"ant-picker-cell-inner\",children:current});}return/*#__PURE__*/_jsx(\"div\",{className:cls('ant-picker-cell-inner',busyValue!==null&&busyValue!==void 0&&busyValue.includes(getTime(current))?styles.active:''),style:busyValue!==null&&busyValue!==void 0&&busyValue.includes(getTime(current))?style:{},children:current.date()});},[busyValue]);return/*#__PURE__*/_jsx(\"div\",{style:wrapperStyle,className:styles.calendarWrapper,children:/*#__PURE__*/_jsx(Calendar,{value:calenderValue,fullscreen:false,headerRender:function headerRender(_ref){var value=_ref.value,_onChange=_ref.onChange;var start=0;var end=12;// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar monthOptions=[];var months=[];for(var i=0;i<12;i++){months.push(i+1);}for(var _i=start;_i<end;_i++){monthOptions.push(/*#__PURE__*/_jsx(Select.Option,{value:_i,className:\"month-item\",children:months[_i]+'月'},_i));}var year=value.year();var month=value.month();// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar options=[];for(var _i2=year-10;_i2<year+10;_i2+=1){options.push(/*#__PURE__*/_jsx(Select.Option,{value:_i2,className:\"year-item\",children:_i2+'年'},_i2));}return/*#__PURE__*/_jsx(\"div\",{style:{padding:8},children:/*#__PURE__*/_jsxs(Row,{gutter:20,children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Select,{size:\"large\",popupMatchSelectWidth:false,className:\"my-year-select\",value:year,onChange:function onChange(newYear){var now=value.clone().year(newYear);_onChange(now);},children:options})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Select,{size:\"small\",popupMatchSelectWidth:false,value:month,onChange:function onChange(newMonth){var now=value.clone().month(newMonth);_onChange(now);},children:monthOptions})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"div\",{className:styles.today,onClick:handleSetToday,children:\"\\u4ECA\\u5929\"})})]})});},onPanelChange:onPanelChange,onChange:handleChange,fullCellRender:function fullCellRender(current,info){return handleFullCell(current,info);}})});};export default CalendarPanel;","map":{"version":3,"names":["React","useState","dayjs","dayLocaleData","Calendar","Col","Row","Select","theme","cls","styles","jsx","_jsx","jsxs","_jsxs","extend","CalendarPanel","props","onChangeTime","busyValue","_theme$useToken","useToken","token","_useState","_useState2","_slicedToArray","calenderValue","setCalenderValue","onPanelChange","value","mode","console","log","format","wrapperStyle","border","concat","colorBorderSecondary","borderRadius","borderRadiusLG","handleSetToday","handleChange","day","style","colorPrimary","background","getTime","time","year","get","month","date","handleFullCell","useCallback","current","info","type","originNode","className","children","includes","active","calendarWrapper","fullscreen","headerRender","_ref","onChange","start","end","monthOptions","months","i","push","Option","options","padding","gutter","size","popupMatchSelectWidth","newYear","now","clone","newMonth","today","onClick","fullCellRender"],"sources":["/Users/zhangyanjun/react-project/mail/src/components/scheduleManage/calander/index.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport dayjs from 'dayjs'\nimport 'dayjs/locale/zh-cn'\nimport type { Dayjs } from 'dayjs'\nimport dayLocaleData from 'dayjs/plugin/localeData'\nimport { Calendar, Col, Row, Select, theme } from 'antd'\nimport type { CalendarProps } from 'antd'\nimport type { CellRenderInfo } from 'rc-picker/es/interface'\nimport cls from 'classnames'\nimport styles from './index.module.less'\ndayjs.extend(dayLocaleData)\n\ntype IProps = {\n  onChangeTime: (time) => void\n  busyValue: string[]\n}\n\nconst CalendarPanel = (props: IProps) => {\n  const { onChangeTime, busyValue } = props\n  const { token } = theme.useToken()\n  const [calenderValue, setCalenderValue] = useState<Dayjs>()\n  const onPanelChange = (value: Dayjs, mode: CalendarProps<Dayjs>['mode']) => {\n    console.log(value.format('YYYY-MM-DD'), mode)\n  }\n\n  const wrapperStyle: React.CSSProperties = {\n    // width: \"100%\",\n    border: `1px solid ${token.colorBorderSecondary}`,\n    borderRadius: token.borderRadiusLG,\n  }\n  const handleSetToday = () => {\n    //设置为当前的日期\n    const value = dayjs()\n    onChangeTime(value.format('YYYY-MM-DD'))\n    setCalenderValue(value)\n  }\n  const handleChange = (day: Dayjs) => {\n    onChangeTime(day.format('YYYY-MM-DD'))\n    setCalenderValue(day)\n  }\n\n  const style: React.CSSProperties = {\n    border: `1px solid ${token.colorPrimary}`,\n    borderRadius: 4,\n    background: '#C5DEFC',\n  }\n  const getTime = (time) => {\n    const year = time.get('year')\n    const month = time.get('month') + 1\n    const day = time.date()\n    return `${year}-${month}-${day}`\n  }\n  const handleFullCell = React.useCallback(\n    (current: number | Dayjs, info: CellRenderInfo<Dayjs>) => {\n      if (info.type !== 'date') {\n        return info.originNode\n      }\n      if (typeof current === 'number') {\n        return <div className='ant-picker-cell-inner'>{current}</div>\n      }\n      return (\n        <div\n          className={cls(\n            'ant-picker-cell-inner',\n            busyValue?.includes(getTime(current)) ? styles.active : '',\n          )}\n          style={busyValue?.includes(getTime(current)) ? style : {}}\n        >\n          {current.date()}\n        </div>\n      )\n    },\n    [busyValue],\n  )\n  return (\n    <div style={wrapperStyle} className={styles.calendarWrapper}>\n      <Calendar\n        value={calenderValue}\n        fullscreen={false}\n        headerRender={({ value, onChange }) => {\n          const start = 0\n          const end = 12\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          const monthOptions: any = []\n\n          const months: number[] = []\n          for (let i = 0; i < 12; i++) {\n            months.push(i + 1)\n          }\n\n          for (let i = start; i < end; i++) {\n            monthOptions.push(\n              <Select.Option key={i} value={i} className='month-item'>\n                {months[i] + '月'}\n              </Select.Option>,\n            )\n          }\n\n          const year = value.year()\n          const month = value.month()\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          const options: any = []\n          for (let i = year - 10; i < year + 10; i += 1) {\n            options.push(\n              <Select.Option key={i} value={i} className='year-item'>\n                {i + '年'}\n              </Select.Option>,\n            )\n          }\n          return (\n            <div style={{ padding: 8 }}>\n              <Row gutter={20}>\n                <Col>\n                  <Select\n                    size='large'\n                    popupMatchSelectWidth={false}\n                    className='my-year-select'\n                    value={year}\n                    onChange={(newYear) => {\n                      const now = value.clone().year(newYear)\n                      onChange(now)\n                    }}\n                  >\n                    {options}\n                  </Select>\n                </Col>\n                <Col>\n                  <Select\n                    size='small'\n                    popupMatchSelectWidth={false}\n                    value={month}\n                    onChange={(newMonth) => {\n                      const now = value.clone().month(newMonth)\n                      onChange(now)\n                    }}\n                  >\n                    {monthOptions}\n                  </Select>\n                </Col>\n                <Col>\n                  <div className={styles.today} onClick={handleSetToday}>\n                    今天\n                  </div>\n                </Col>\n              </Row>\n            </div>\n          )\n        }}\n        onPanelChange={onPanelChange}\n        onChange={handleChange}\n        fullCellRender={(current, info) => handleFullCell(current, info)}\n      />\n    </div>\n  )\n}\n\nexport default CalendarPanel\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"/Users/zhangyanjun/react-project/mail/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/zhangyanjun/react-project/mail/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import UserForm from'./form';import styles from'./index.module.less';import submitSucc from'@/assets/images/submitSuccess.png';import Header from'../header';import{getInfo,updateUserInfo}from'@/api/app';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserProtrait=function UserProtrait(props){var onhandleClose=props.onhandleClose,id=props.id,portrait=props.portrait;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),stepOne=_useState2[0],setStepOne=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var submitData=function submitData(data){console.log(data,'data');var newData=_objectSpread({id:id},data);updateUserInfo(newData).then(function(res){console.log(res);setStepOne(2);});};var handleUpdata=function handleUpdata(){getUserInfo(id);setStepOne(1);};var title='用户画像';useEffect(function(){getUserInfo(id);},[id]);var getUserInfo=function getUserInfo(id){getInfo(id).then(function(res){setFormData(res);});};return/*#__PURE__*/_jsx(_Fragment,{children:stepOne===1?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{onhandleback:onhandleClose,title:title,onhandleClose:onhandleClose}),/*#__PURE__*/_jsx(\"div\",{className:styles.userForm,children:/*#__PURE__*/_jsx(UserForm,{portrait:portrait,data:formData,onHandleBack:submitData})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{onhandleback:function onhandleback(){return setStepOne(1);},onhandleClose:onhandleClose,title:title}),/*#__PURE__*/_jsxs(\"div\",{className:styles.subwrapper,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.success,src:submitSucc,alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.text,children:\"\\u63D0\\u4EA4\\u6210\\u529F\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.update,onClick:handleUpdata,children:\"\\u7EE7\\u7EED\\u66F4\\u65B0\"})]})]})});};export default UserProtrait;","map":{"version":3,"names":["useEffect","useState","UserForm","styles","submitSucc","Header","getInfo","updateUserInfo","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","UserProtrait","props","onhandleClose","id","portrait","_useState","_useState2","_slicedToArray","stepOne","setStepOne","_useState3","_useState4","formData","setFormData","submitData","data","console","log","newData","_objectSpread","then","res","handleUpdata","getUserInfo","title","children","onhandleback","className","userForm","onHandleBack","subwrapper","success","src","alt","text","update","onClick"],"sources":["/Users/zhangyanjun/react-project/mail/src/components/userPortrait/index.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport UserForm, { FieldType } from './form'\nimport styles from './index.module.less'\nimport submitSucc from '@/assets/images/submitSuccess.png'\nimport Header from '../header'\nimport { getInfo, updateUserInfo } from '@/api/app'\n\ntype IProps = {\n  onhandleClose: () => void\n  id: string | undefined\n  portrait: string | undefined\n}\nconst UserProtrait = (props: IProps) => {\n  const { onhandleClose, id, portrait } = props\n  const [stepOne, setStepOne] = useState(1)\n  const [formData, setFormData] = useState<FieldType>()\n  const submitData = (data) => {\n    console.log(data, 'data')\n    const newData = {\n      id,\n      ...data,\n    }\n    updateUserInfo(newData).then((res) => {\n      console.log(res)\n      setStepOne(2)\n    })\n  }\n  const handleUpdata = () => {\n    getUserInfo(id)\n    setStepOne(1)\n  }\n  const title = '用户画像'\n  useEffect(() => {\n    getUserInfo(id)\n  }, [id])\n  const getUserInfo = (id) => {\n    getInfo(id).then((res) => {\n      setFormData(res)\n    })\n  }\n  return (\n    <>\n      {stepOne === 1 ? (\n        <>\n          <Header\n            onhandleback={onhandleClose}\n            title={title}\n            onhandleClose={onhandleClose}\n          />\n          <div className={styles.userForm}>\n            <UserForm\n              portrait={portrait as string}\n              data={formData}\n              onHandleBack={submitData}\n            />\n          </div>\n        </>\n      ) : (\n        <>\n          <Header\n            onhandleback={() => setStepOne(1)}\n            onhandleClose={onhandleClose}\n            title={title}\n          />\n          <div className={styles.subwrapper}>\n            <img className={styles.success} src={submitSucc} alt='' />\n            <div className={styles.text}>提交成功</div>\n            <div className={styles.update} onClick={handleUpdata}>\n              继续更新\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  )\n}\nexport default UserProtrait\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
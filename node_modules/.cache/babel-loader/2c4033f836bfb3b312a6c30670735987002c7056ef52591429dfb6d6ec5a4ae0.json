{"ast":null,"code":"var _jsxFileName = \"/Users/zhangyanjun/react-project/mail/src/components/scheduleManage/index.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport CalendarPanel from \"./calander/index\";\nimport Header from \"../header\";\nimport { Form, Input, message } from \"antd\";\nimport styles from \"./index.module.less\";\nimport { getSchedule, getScheduleById, postScheduleInfo } from \"@/api/app\";\nimport dayjs from \"dayjs\";\nimport FormBox from \"./form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  TextArea\n} = Input;\nconst dataFormat = 'YYYY-MM-DD HH:mm:ss\"';\nconst ScheduleManage = props => {\n  _s();\n  const {\n    onhandleClose,\n    id\n  } = props;\n  const [step, setStep] = useState(1);\n  const [meetingList, setMeetingList] = useState([]);\n  const [form] = Form.useForm();\n  const title = \"日程管理\";\n  const handleOk = data => {\n    const othersData = {\n      customerId: id,\n      isAllDay: 0,\n      startDate: dealTime(data.startDate),\n      endDate: dealTime(data.endDate)\n    };\n    const newData = {\n      ...data,\n      ...othersData\n    };\n    console.log(newData);\n    addSchedule(newData);\n  };\n  const addSchedule = data => {\n    postScheduleInfo(data).then(res => {\n      message.success(\"新增成功\");\n    });\n  };\n  const dealTime = date => {\n    return dayjs(date).format(\"YYYY-MM-DD HH:mm:ss\");\n  };\n  const handleDetail = id => {\n    console.log(id);\n    getScheduleById(id).then(res => {\n      console.log(res);\n      form.setFieldsValue(res[0]);\n      // form.setFieldsValue{\n      //   stateDate: dayjs(res.startDate, dataFormat)\n      // }\n      setStep(2);\n    });\n  };\n  const onhandleAdd = () => {\n    // 新增事项\n    setStep(2);\n  };\n  const getDayTime = date => {\n    return {\n      year: dayjs(date).year(),\n      month: dayjs(date).month() + 1,\n      day: dayjs(date).date()\n    };\n  };\n  useEffect(() => {\n    const currentDate = {\n      year: dayjs().year(),\n      month: dayjs().month() + 1,\n      day: dayjs().date()\n    };\n    getScheduleList(id, currentDate);\n  }, []);\n  const getScheduleList = (id, date) => {\n    getSchedule(id, date).then(res => {\n      setMeetingList(res);\n    });\n  };\n  const changeTimeChoose = time => {\n    getScheduleList(id, getDayTime(time));\n  };\n  const getMettingTime = time => {\n    return dayjs(time).hour() + \":\" + (dayjs(time).minute() < 10 ? \"0\" + dayjs(time).minute() : dayjs(time).minute());\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [step === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        onhandleback: onhandleClose,\n        title: title,\n        onHandleAdd: onhandleAdd,\n        type: \"calendar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CalendarPanel, {\n        onChangeTime: changeTimeChoose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.jobList,\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: meetingList.length > 0 ? meetingList.map((item, index) => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => handleDetail(item.id),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.left,\n                children: [getMettingTime(item.startDate), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 60\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [getMettingTime(item.endDate), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: item.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 25\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 23\n            }, this);\n          }) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), step === 2 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        onhandleback: () => setStep(1),\n        title: title,\n        onhandleClose: onhandleClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.formBox,\n        children: /*#__PURE__*/_jsxDEV(FormBox, {\n          handleOk: handleOk\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(ScheduleManage, \"ApsTy32KkoHhVODFtrpecUwolL8=\", false, function () {\n  return [Form.useForm];\n});\n_c = ScheduleManage;\nexport default ScheduleManage;\nvar _c;\n$RefreshReg$(_c, \"ScheduleManage\");","map":{"version":3,"names":["useEffect","useState","CalendarPanel","Header","Form","Input","message","styles","getSchedule","getScheduleById","postScheduleInfo","dayjs","FormBox","jsxDEV","_jsxDEV","Fragment","_Fragment","TextArea","dataFormat","ScheduleManage","props","_s","onhandleClose","id","step","setStep","meetingList","setMeetingList","form","useForm","title","handleOk","data","othersData","customerId","isAllDay","startDate","dealTime","endDate","newData","console","log","addSchedule","then","res","success","date","format","handleDetail","setFieldsValue","onhandleAdd","getDayTime","year","month","day","currentDate","getScheduleList","changeTimeChoose","time","getMettingTime","hour","minute","children","onhandleback","onHandleAdd","type","fileName","_jsxFileName","lineNumber","columnNumber","onChangeTime","className","jobList","length","map","item","index","onClick","left","formBox","_c","$RefreshReg$"],"sources":["/Users/zhangyanjun/react-project/mail/src/components/scheduleManage/index.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport CalendarPanel from \"./calander/index\";\nimport Header from \"../header\";\nimport {\n  Button,\n  DatePicker,\n  DatePickerProps,\n  Form,\n  Input,\n  message,\n} from \"antd\";\nimport styles from \"./index.module.less\";\nimport { RangePickerProps } from \"antd/es/date-picker\";\nimport {\n  ISchedule,\n  getSchedule,\n  getScheduleById,\n  postScheduleInfo,\n} from \"@/api/app\";\nimport dayjs from \"dayjs\";\nimport FormBox from \"./form\";\nconst { TextArea } = Input;\ntype FieldType = {};\nconst dataFormat = 'YYYY-MM-DD HH:mm:ss\"';\nconst ScheduleManage = (props) => {\n  const { onhandleClose, id } = props;\n  const [step, setStep] = useState(1);\n  const [meetingList, setMeetingList] = useState<ISchedule[]>([]);\n  const [form] = Form.useForm();\n  const title = \"日程管理\";\n  const handleOk = (data) => {\n    const othersData = {\n      customerId: id,\n      isAllDay: 0,\n      startDate: dealTime(data.startDate),\n      endDate: dealTime(data.endDate),\n    };\n    const newData = {\n      ...data,\n      ...othersData,\n    };\n    console.log(newData);\n    addSchedule(newData);\n  };\n  const addSchedule = (data) => {\n    postScheduleInfo(data).then((res) => {\n      message.success(\"新增成功\");\n    });\n  };\n  const dealTime = (date) => {\n    return dayjs(date).format(\"YYYY-MM-DD HH:mm:ss\");\n  };\n\n  const handleDetail = (id) => {\n    console.log(id);\n    getScheduleById(id).then((res) => {\n      console.log(res);\n      form.setFieldsValue(res[0]);\n      // form.setFieldsValue{\n      //   stateDate: dayjs(res.startDate, dataFormat)\n      // }\n      setStep(2);\n    });\n  };\n\n  const onhandleAdd = () => {\n    // 新增事项\n    setStep(2);\n  };\n  const getDayTime = (date) => {\n    return {\n      year: dayjs(date).year(),\n      month: dayjs(date).month() + 1,\n      day: dayjs(date).date(),\n    };\n  };\n  useEffect(() => {\n    const currentDate = {\n      year: dayjs().year(),\n      month: dayjs().month() + 1,\n      day: dayjs().date(),\n    };\n    getScheduleList(id, currentDate);\n  }, []);\n  const getScheduleList = (id, date) => {\n    getSchedule(id, date).then((res) => {\n      setMeetingList(res);\n    });\n  };\n  const changeTimeChoose = (time) => {\n    getScheduleList(id, getDayTime(time));\n  };\n  const getMettingTime = (time) => {\n    return (\n      dayjs(time).hour() +\n      \":\" +\n      (dayjs(time).minute() < 10\n        ? \"0\" + dayjs(time).minute()\n        : dayjs(time).minute())\n    );\n  };\n  return (\n    <div>\n      {step === 1 && (\n        <>\n          <Header\n            onhandleback={onhandleClose}\n            title={title}\n            onHandleAdd={onhandleAdd}\n            type={\"calendar\"}\n          />\n          <CalendarPanel onChangeTime={changeTimeChoose} />\n          <div className={styles.jobList}>\n            <ul>\n              {meetingList.length > 0\n                ? meetingList.map((item, index) => {\n                    return (\n                      <li key={index} onClick={() => handleDetail(item.id)}>\n                        <div className={styles.left}>\n                          {getMettingTime(item.startDate)} <br />{\" \"}\n                          <span>{getMettingTime(item.endDate)} </span>\n                        </div>\n                        <div>{item.title}</div>\n                      </li>\n                    );\n                  })\n                : null}\n            </ul>\n          </div>\n        </>\n      )}\n      {step === 2 && (\n        <>\n          <Header\n            onhandleback={() => setStep(1)}\n            title={title}\n            onhandleClose={onhandleClose}\n          />\n          <div className={styles.formBox}>\n            <FormBox handleOk={handleOk} />\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\nexport default ScheduleManage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
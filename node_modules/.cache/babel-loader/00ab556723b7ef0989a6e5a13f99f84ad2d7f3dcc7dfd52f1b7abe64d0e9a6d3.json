{"ast":null,"code":"import _classCallCheck from\"/Users/zhangyanjun/react-project/mail/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/zhangyanjun/react-project/mail/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/zhangyanjun/react-project/mail/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/zhangyanjun/react-project/mail/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import ContentEditable from'react-contenteditable';import{jsx as _jsx}from\"react/jsx-runtime\";var SendBox=/*#__PURE__*/function(_React$Component){_inherits(SendBox,_React$Component);var _super=_createSuper(SendBox);function SendBox(props){var _this;_classCallCheck(this,SendBox);_this=_super.call(this,props);_this.contentEditable=void 0;_this.state=void 0;_this.handleChange=function(evt){_this.setState({html:evt.target.value});_this.props.onHandleContent(evt.target.value);};_this.handleKeyDown=function(evt){_this.props.onHandleKeyDown(evt);};_this.render=function(){return/*#__PURE__*/_jsx(ContentEditable,{innerRef:_this.contentEditable,html:_this.state.html// innerHTML of the editable div\n,disabled:false// use true to disable editing\n,onChange:_this.handleChange// handle innerHTML change\n,tagName:\"article\"// Use a custom HTML tag (uses a div by default)\n,onKeyDown:_this.handleKeyDown});};_this.contentEditable=/*#__PURE__*/React.createRef();_this.state={html:''};return _this;}_createClass(SendBox,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.onRef&&this.props.onRef(this.contentEditable);}},{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps){var ref=this.contentEditable.current;return nextProps.value!==ref.innerHTML;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var ref=this.contentEditable.current;if(this.props.smartContent!==ref.innerHTML){ref.innerHTML=this.props.smartContent;}}}]);return SendBox;}(React.Component);export default SendBox;","map":{"version":3,"names":["React","ContentEditable","jsx","_jsx","SendBox","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","contentEditable","state","handleChange","evt","setState","html","target","value","onHandleContent","handleKeyDown","onHandleKeyDown","render","innerRef","disabled","onChange","tagName","onKeyDown","createRef","_createClass","key","componentDidMount","onRef","shouldComponentUpdate","nextProps","ref","current","innerHTML","componentDidUpdate","smartContent","Component"],"sources":["/Users/zhangyanjun/react-project/mail/src/components/sendBox/index.tsx"],"sourcesContent":["import React from 'react'\r\nimport ContentEditable from 'react-contenteditable'\r\n\r\ntype IProps = {\r\n  onHandleContent: (content: string) => void\r\n  onHandleKeyDown: (e: React.KeyboardEvent<HTMLDivElement>) => void\r\n  smartContent: string\r\n  value?: string\r\n  onRef?: (ref: React.RefObject<HTMLDivElement>) => void\r\n}\r\nclass SendBox extends React.Component<IProps> {\r\n  contentEditable: React.RefObject<HTMLDivElement>\r\n  state: { html: string }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.contentEditable = React.createRef()\r\n    this.state = { html: '' }\r\n  }\r\n  componentDidMount(): void {\r\n    this.props.onRef && this.props.onRef(this.contentEditable)\r\n  }\r\n  shouldComponentUpdate(nextProps) {\r\n    const ref = this.contentEditable.current as unknown as HTMLDivElement\r\n    return nextProps.value !== ref.innerHTML\r\n  }\r\n  componentDidUpdate() {\r\n    const ref = this.contentEditable.current as unknown as HTMLDivElement\r\n    if (this.props.smartContent !== ref.innerHTML) {\r\n      ref.innerHTML = this.props.smartContent\r\n    }\r\n  }\r\n  handleChange = (evt) => {\r\n    this.setState({ html: evt.target.value })\r\n    this.props.onHandleContent(evt.target.value)\r\n  }\r\n  handleKeyDown = (evt) => {\r\n    this.props.onHandleKeyDown(evt)\r\n  }\r\n\r\n  render = () => {\r\n    return (\r\n      <ContentEditable\r\n        innerRef={this.contentEditable as unknown as () => void}\r\n        html={this.state.html} // innerHTML of the editable div\r\n        disabled={false} // use true to disable editing\r\n        onChange={this.handleChange} // handle innerHTML change\r\n        tagName='article' // Use a custom HTML tag (uses a div by default)\r\n        onKeyDown={this.handleKeyDown}\r\n      />\r\n    )\r\n  }\r\n}\r\nexport default SendBox\r\n"],"mappings":"4dAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,eAAe,KAAM,uBAAuB,QAAAC,GAAA,IAAAC,IAAA,4BAS7C,CAAAC,OAAO,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,OAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,OAAA,EAIX,SAAAA,QAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,OAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAACC,KAAA,CAJdG,eAAe,QAAAH,KAAA,CACfI,KAAK,QAAAJ,KAAA,CAoBLK,YAAY,CAAG,SAACC,GAAG,CAAK,CACtBN,KAAA,CAAKO,QAAQ,CAAC,CAAEC,IAAI,CAAEF,GAAG,CAACG,MAAM,CAACC,KAAM,CAAC,CAAC,CACzCV,KAAA,CAAKD,KAAK,CAACY,eAAe,CAACL,GAAG,CAACG,MAAM,CAACC,KAAK,CAAC,CAC9C,CAAC,CAAAV,KAAA,CACDY,aAAa,CAAG,SAACN,GAAG,CAAK,CACvBN,KAAA,CAAKD,KAAK,CAACc,eAAe,CAACP,GAAG,CAAC,CACjC,CAAC,CAAAN,KAAA,CAEDc,MAAM,CAAG,UAAM,CACb,mBACErB,IAAA,CAACF,eAAe,EACdwB,QAAQ,CAAEf,KAAA,CAAKG,eAAyC,CACxDK,IAAI,CAAER,KAAA,CAAKI,KAAK,CAACI,IAAM;AAAA,CACvBQ,QAAQ,CAAE,KAAO;AAAA,CACjBC,QAAQ,CAAEjB,KAAA,CAAKK,YAAc;AAAA,CAC7Ba,OAAO,CAAC,SAAU;AAAA,CAClBC,SAAS,CAAEnB,KAAA,CAAKY,aAAc,CAC/B,CAAC,CAEN,CAAC,CAnCCZ,KAAA,CAAKG,eAAe,cAAGb,KAAK,CAAC8B,SAAS,CAAC,CAAC,CACxCpB,KAAA,CAAKI,KAAK,CAAG,CAAEI,IAAI,CAAE,EAAG,CAAC,QAAAR,KAAA,CAC3B,CAACqB,YAAA,CAAA3B,OAAA,GAAA4B,GAAA,qBAAAZ,KAAA,CACD,SAAAa,kBAAA,CAA0B,CACxB,IAAI,CAACxB,KAAK,CAACyB,KAAK,EAAI,IAAI,CAACzB,KAAK,CAACyB,KAAK,CAAC,IAAI,CAACrB,eAAe,CAAC,CAC5D,CAAC,GAAAmB,GAAA,yBAAAZ,KAAA,CACD,SAAAe,sBAAsBC,SAAS,CAAE,CAC/B,GAAM,CAAAC,GAAG,CAAG,IAAI,CAACxB,eAAe,CAACyB,OAAoC,CACrE,MAAO,CAAAF,SAAS,CAAChB,KAAK,GAAKiB,GAAG,CAACE,SAAS,CAC1C,CAAC,GAAAP,GAAA,sBAAAZ,KAAA,CACD,SAAAoB,mBAAA,CAAqB,CACnB,GAAM,CAAAH,GAAG,CAAG,IAAI,CAACxB,eAAe,CAACyB,OAAoC,CACrE,GAAI,IAAI,CAAC7B,KAAK,CAACgC,YAAY,GAAKJ,GAAG,CAACE,SAAS,CAAE,CAC7CF,GAAG,CAACE,SAAS,CAAG,IAAI,CAAC9B,KAAK,CAACgC,YAAY,CACzC,CACF,CAAC,WAAArC,OAAA,GArBmBJ,KAAK,CAAC0C,SAAS,EA2CrC,cAAe,CAAAtC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}